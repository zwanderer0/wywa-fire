---
import type { CollectionEntry } from "astro:content";

type Props = {
  post: CollectionEntry<"updates">;
};

const { post } = Astro.props as Props;
const { tags, description, date } = post.data;

const month = date.toLocaleString("en-US", { month: "short" }).toUpperCase();
const day = date.toLocaleString("en-US", { day: "2-digit" });
const year = date.toLocaleString("en-US", { year: "numeric" });

const href = `/updates/${post.slug}/`;
---

<li class="post-list__item">
  <a class="post-row" href={href} aria-label={`Read update ${post.data.title}`}>
    <time class="post-date" datetime={date.toISOString()}>
      <span>{month}</span>
      <span>{`${day} ${year}`}</span>
    </time>
    <div class="post-body">
      <h3 class="post-title">{post.data.title}</h3>
      {description ? (
        <p class="post-excerpt">{description}</p>
      ) : (
        <p class="post-excerpt">Weekly field notes from the FI-RE team.</p>
      )}
      {tags?.length ? (
        <div class="post-tags">
          {tags.slice(0, 3).map((tag) => (
            <span>{tag}</span>
          ))}
        </div>
      ) : null}
    </div>
  </a>
</li>
